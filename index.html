<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSConf Chile 2024 - Demo</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png">

    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.11.2/lib/p5.min.js"></script>
    <script src="p5.sound.min.js"></script>
    <script>
        let X, Y;
        let mic;

        function preload() {
            img = loadImage("asset1.png");
            img2 = loadImage("asset2.png");
            img3 = loadImage("asset3.png");
            img4 = loadImage("asset4.png");
            img5 = loadImage("asset5.png");
        }

        function setup() {
            createCanvas(1920, 1080);
            mic = new p5.AudioIn();
            mic.start();
            frameRate(60);
            colorMode(HSB, 360, 100, 100);
        }

        function mousePressed() {
            if (mouseX > 0) {
                getAudioContext().resume();
            }
        }

        function draw() {
            let vol = mic.getLevel();
            let X = 670;
            let Y = 1080 / 2 - 582 / 2;

            let hueValue = map(vol, 0, 0.2, 0, 360);

            background(hueValue, 100, 100);

            let y = map(vol, 100, 0, X, 0);
            image(img5, X + 800 * y, Y + 800 * y);
            let a = map(vol, 100, 0, X, 0);
            image(img4, X + 400 * y, Y + 400 * y);
            image(img3, X, Y);
            let b = map(vol, 100, 0, X, 0);
            image(img2, X - 400 * y, Y - 400 * y);
            let c = map(vol, 100, 0, X, 0);
            image(img, X - 800 * y, Y - 800 * y);
        }


    </script>
</body>

</html>